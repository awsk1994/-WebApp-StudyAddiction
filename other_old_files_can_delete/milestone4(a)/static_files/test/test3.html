<html>
<head>
     <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
    <style>
        #map{ height:500px;}
    </style>
    <title> StudyAddicts </title>
    <script src="jquery-2.1.4.min.js"></script>

     <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
     <script src='https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.js'></script>
    <link href='https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.css' rel='stylesheet' />
    <script src="leaflet-indoor.js"></script>

    <script type="text/javascript">
        $(document).ready(function()
        {
            $(document).ajaxError(function()
            {
                alert("Sorry, there was a problem!");
            });

            var map = L.map('map').setView([43.12505, -77.63], 20);

            L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
                maxZoom: 22,
                id: 'mapbox.streets',
                accessToken: 'pk.eyJ1IjoiYXdzazE5OTQiLCJhIjoiY2loZjc4cjk1MDRja3RyajcxZzZ5MzcxbSJ9.E_JGHPNkZ5_nC6AtQGINjQ'

            }).addTo(map);


            var marker = L.marker([43.125, -77.63]).addTo(map);
            var circle = L.circle([43.125, -77.63], 45, {
                color: 'red',
                fillColor: '#f03',
                fillOpacity: 0.1
            }).addTo(map);
        });
        
        $.getJSON("data.json", function(geoJSON) {

            var indoorLayer = new L.Indoor(geoJSON, {
                getLevel: function(feature) { 
                    if (feature.properties.relations.length === 0)
                        return null;

                    return feature.properties.relations[0].reltags.level;
                },
                onEachFeature: function(feature, layer) {
                    layer.bindPopup(JSON.stringify(feature.properties, null, 4));
                },
                style: function(feature) {
                    var fill = 'white';

                    if (feature.properties.tags.buildingpart === 'corridor') {
                        fill = '#169EC6';
                    } else if (feature.properties.tags.buildingpart === 'verticalpassage') {
                        fill = '#0A485B';
                    }

                    return {
                        fillColor: fill,
                        weight: 1,
                        color: '#666',
                        fillOpacity: 1
                    };
                }
            });

    </script>
</head>

<body>
    <h1>Map</h1>
    <div id="map"></div>
</body>